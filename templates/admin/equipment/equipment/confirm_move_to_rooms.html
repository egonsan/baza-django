{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
  <h1>Przenieś zaznaczone karty do kategorii Pomieszczenia / Sale</h1>

  {% if error_list %}
      <ul style="color: #b30000; font-weight: bold;">
          {% for err in error_list %}
              <li>{{ err }}</li>
          {% endfor %}
      </ul>
  {% endif %}

  <p>
      Wybierz kategorię pomieszczenia i podaj budynek oraz numer pomieszczenia.
      Wszystkie zaznaczone karty sprzętu zostaną przeniesione do wskazanej lokalizacji.
  </p>

  <form method="post">
      {% csrf_token %}

      {# Przekazujemy dalej zaznaczone obiekty #}
      {% for obj in queryset %}
          <input type="hidden" name="_selected_action" value="{{ obj.pk }}">
      {% endfor %}

      {# Nazwa akcji #}
      <input type="hidden" name="action" value="{{ action }}">

      {# Flaga potwierdzenia #}
      <input type="hidden" name="confirm" value="yes">

      <div class="module">
          <h2>Kategoria pomieszczenia</h2>
          <p>
              <select name="room_category">
                  <option value="">-- wybierz kategorię --</option>
                  {% for code, label in room_category_choices %}
                      <option value="{{ code }}">{{ label }}</option>
                  {% endfor %}
              </select>
          </p>
      </div>

      <div class="module">
          <h2>Lokalizacja (budynek i pomieszczenie)</h2>
          <p>
              <label>
                  Budynek:
                  <input type="text" name="building" value="{{ building|default_if_none:'' }}">
              </label>
          </p>
          <p>
              <label>
                  Pomieszczenie:
                  <input type="text" name="room" value="{{ room|default_if_none:'' }}">
              </label>
          </p>
      </div>

      <div class="module">
          <h2>Wybrane karty sprzętu</h2>
          <ul>
              {% for obj in queryset %}
                  <li>{{ obj }}</li>
              {% endfor %}
          </ul>
      </div>

      <div style="margin-top: 15px;">
          <input type="submit" value="{% trans 'Yes, I am sure' %}" class="default">
          <a href="..">{% trans "Cancel" %}</a>
      </div>
  </form>
{% endblock %}