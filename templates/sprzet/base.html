{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <title>WIMiO</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Ustawiamy motyw PRZED renderem (bez “mignięcia”) -->
    <script>
      (function () {
        try {
          var t = localStorage.getItem("theme");
          if (t === "dark" || t === "light") {
            document.documentElement.setAttribute("data-theme", t);
          } else {
            document.documentElement.setAttribute("data-theme", "light");
          }
        } catch (e) {
          document.documentElement.setAttribute("data-theme", "light");
        }
      })();
    </script>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        /* =========================
           Zmienne motywu (light/dark)
           ========================= */

        html[data-theme="light"]{
            --bg: #ffffff;
            --text: #111827;
            --muted: #5b6473;

            --panel: #ffffff;
            --panel-border: #e6e8ee;
            --panel-shadow: 0 2px 10px rgba(0,0,0,0.07);

            --table-head: #f1f3f7;
            --table-row-border: #e3e6ec;

            --btn: #193b6b;
            --btn-text: #ffffff;
            --btn-hover: #102947;

            --input-bg: #fbfcfe;
            --input-border: #d7dbe4;
        }

        html[data-theme="dark"]{
            --bg: #0b0f16;
            --text: #e6e9ef;
            --muted: #a9b2c2;

            --panel: #111827;
            --panel-border: rgba(255,255,255,0.10);
            --panel-shadow: 0 2px 16px rgba(0,0,0,0.55);

            --table-head: #0f172a;
            --table-row-border: rgba(255,255,255,0.10);

            --btn: #2f6ad8;
            --btn-text: #ffffff;
            --btn-hover: #2456b3;

            --input-bg: #0f172a;
            --input-border: rgba(255,255,255,0.18);
        }

        /* GLOBALNE TŁO DLA ZWYKŁYCH STRON (OPRÓCZ LOGINU) */
        #main-bg {
            min-height: 100vh;
            background: var(--bg);
            color: var(--text);
             padding-top: 16px; /* usuwa pasek pod headerem */
        }

        /* TŁO DLA STRONY LOGINU */
        #login-bg {
            min-height: 100vh;
            background: url("{% static 'sprzet/wallpaper.jpg' %}") no-repeat center center fixed;
            background-size: cover;
            color: #ffffff;
        }

        /* =========================
           Ujednolicenie typowych paneli/tabel/przycisków
           (żeby nie było białych “tabelek” w dark)
           ========================= */

        /* Najczęściej używany kontener (np. Twoje .panel) */
        .panel{
            background: var(--panel) !important;
            color: var(--text) !important;
            border: 1px solid var(--panel-border) !important;
            box-shadow: var(--panel-shadow) !important;
        }

        /* Typowe tabele w projekcie */
        table.soft-table{
            background: var(--panel) !important;
            color: var(--text) !important;
        }
        table.soft-table th{
            background: var(--table-head) !important;
            color: var(--text) !important;
        }
        table.soft-table td{
            border-bottom: 1px solid var(--table-row-border) !important;
            color: var(--text) !important;
        }

        /* Teksty pomocnicze */
        .muted, .empty, small{
            color: var(--muted) !important;
        }

        /* Przyciski (Twoje) */
        .btn-details{
            background: var(--btn) !important;
            color: var(--btn-text) !important;
        }
        .btn-details:hover{
            background: var(--btn-hover) !important;
        }

        /* Inputy (np. wyszukiwarki) */
        input[type="text"], input[type="search"], select, textarea{
            background: var(--input-bg);
            color: var(--text);
            border: 1px solid var(--input-border);
        }
    </style>
</head>
<body>

{% include "sprzet/header.html" %}

{# Jeden blok content, ale różne tła w zależności od URL #}
<div id="{% if request.resolver_match.url_name in 'login login-root' %}login-bg{% else %}main-bg{% endif %}">
    {% block content %}{% endblock %}
</div>

<script>
  (function () {
    function getTheme() {
      try {
        var t = localStorage.getItem("theme");
        return (t === "dark" || t === "light") ? t : "light";
      } catch (e) {
        return "light";
      }
    }

    function setTheme(theme) {
      document.documentElement.setAttribute("data-theme", theme);
      try { localStorage.setItem("theme", theme); } catch (e) {}
    }

    document.addEventListener("DOMContentLoaded", function () {
      var btn = document.getElementById("themeToggle");
      if (!btn) return;

      btn.addEventListener("click", function () {
        var current = document.documentElement.getAttribute("data-theme") || getTheme();
        var next = (current === "dark") ? "light" : "dark";
        setTheme(next);
      });
    });
  })();
</script>

</body>
</html>