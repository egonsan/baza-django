{% load static %}

<style>
    .top-nav {
        position: sticky;
        top: 0;
        z-index: 1000;

        background: linear-gradient(
            90deg,
            #08101d 0%,
            #152234 50%,
            #233247 100%
        );

        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 6px 22px rgba(0, 0, 0, 0.45);
    }

    .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 10px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .nav-left {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .nav-logo-img {
        width: 34px;
        height: 34px;
        border-radius: 6px;
        object-fit: contain;
    }

    .nav-logo-title {
        font-size: 1.10em;
        font-weight: 600;
        color: #ffffff;
        letter-spacing: 0.5px;
    }

    .nav-links {
        display: flex;
        gap: 26px;
        align-items: center;
    }

    .nav-link {
        color: #d4dbee;
        text-decoration: none;
        font-size: 0.97em;
        font-weight: 500;
        padding: 4px 2px;
        transition: color 0.15s ease, border-color 0.15s ease;
        border-bottom: 2px solid transparent;
    }

    .nav-link:hover {
        color: #ffffff;
        border-bottom-color: rgba(255, 255, 255, 0.35);
    }

    .nav-link-active {
        color: #ffffff !important;
        font-weight: 600 !important;
        border-bottom-color: #ffffff;
    }

    .nav-link-disabled {
        color: rgba(255, 255, 255, 0.38);
        cursor: default;
        pointer-events: none;
        border-bottom-color: transparent;
    }
</style>

<header class="top-nav">
    <div class="nav-container">

        <div class="nav-left">
            <img src="{% static 'sprzet/logo1.png' %}" class="nav-logo-img" alt="Logo">
            <div class="nav-logo-title">WIMiO</div>
        </div>

        <nav class="nav-links">
            {% comment %}
                Logika:
                - Gość: tylko Oprogramowanie.
                - Admin/staff: wszystkie zakładki.
                - Aktywna zakładka rozpoznawana po fragmencie request.path.
            {% endcomment %}

            {% if request.session.guest %}
                {# GOŚĆ – tylko Oprogramowanie #}
                <a href="{% url 'equipment:oprogramowanie' %}"
                   class="nav-link nav-link-active">
                    Oprogramowanie
                </a>

            {% elif user.is_authenticated and user.is_staff %}
                {% with path=request.path %}

                    {# OPROGRAMOWANIE #}
                    <a href="{% url 'equipment:oprogramowanie' %}"
                       class="nav-link {% if '/baza/oprogramowanie' in path %}nav-link-active{% endif %}">
                        Oprogramowanie
                    </a>

                    {# POMIESZCZENIA / SALE #}
                    <a href="{% url 'equipment:rooms_dashboard' %}"
                       class="nav-link {% if '/baza/pomieszczenia' in path %}nav-link-active{% endif %}">
                        Pomieszczenia / Sale
                    </a>

                    {# PRACOWNIK #}
                    <a href="{% url 'equipment:workers_list' %}"
                       class="nav-link {% if '/baza/pracownicy' in path %}nav-link-active{% endif %}">
                        Pracownik
                    </a>

                    {# MAGAZYN #}
                    <a href="{% url 'equipment:equipment_list' %}"
                       class="nav-link {% if '/baza/magazyn' in path %}nav-link-active{% endif %}">
                        Magazyn
                    </a>

                {% endwith %}

            {% else %}
                {# Domyślnie – użytkownik zalogowany, ale nie-staff: tylko Oprogramowanie #}
                <a href="{% url 'equipment:oprogramowanie' %}"
                   class="nav-link nav-link-active">
                    Oprogramowanie
                </a>
            {% endif %}
        </nav>

    </div>
</header>
